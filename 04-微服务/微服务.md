## 微服务

### 介绍

微服务架构的特点：

1. 将系统服务层完全独立出来，并将服务处抽取为一个个微服务（单一职责）
2. 采用一些轻量协议进行传输（http、rpc等）
3. 服务拆分粒度更细，有利于资源重复利用，提高开发效率（隔离性）
4. 可以更加精准的制定每个服务的优化方案，提高系统可维护性（独立对应的数据）
5. 相比ESB更轻量
6. 技术多样性（一个大项目拆成很多小项目，那么这些小项目使用什么语言就没有限制）
7. 对外REST，对内RPC

行业现状：

- 更新要求快，每周一次占相当一部分
- 系统越来越复杂、运维管理难、访问增速快
- 微服务架构搭配docker越来越火爆

什么是微服务：

- 把每个功能拆分成一个个小的服务
- 一种设计思想

### gRPC

- 和RPC类似，是一个跨语言的框架，也就是客户端和服务端可以再多种环境语言下开发运行
- gRPC是利用Protobuf协议进行RPC调用

### Go Micro

> gRPC的升级版，是一个插件化的基础框架，基于此可构建微服务，设计哲学是可插拔的插件化架构

#### 主要功能：

- 服务发现：自动服务注册和名称解析
- 负载均衡：基于服务发现构建客户端负载均衡
- 消息编码：基于内容类型的动态消息编码
- 请求/响应：基于RPC的请求/响应，支持双向流
- Async Messaging：PubSub是异步通信和事件驱动架构的一流公民
- 可插拔接口

### golang中实现RPC

四个必要的条件

- 结构体首字母要大写
- 函数名也是首字母大写
- 服务端函数参数，第一个参数是接收参数，第二个参数是服务端返回给客户端的参数，第二个参数必须是指针类型
- 服务端定义的函数必须有一个返回值 error

